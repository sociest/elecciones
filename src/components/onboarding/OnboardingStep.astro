---
import Layout from "../../layouts/Layout.astro";
import { ArrowRight, Globe } from "lucide-react";
import Sponsors from "../ui/Sponsors.astro";

interface Props {
  step: number;
  totalSteps: number;
  title: string;
  eyebrow?: string;
}

const {
  step,
  totalSteps,
  title,
  eyebrow = `Onboarding 0${step}`,
} = Astro.props;

const dots = Array.from({ length: totalSteps }, (_, i) => i + 1);
---

<Layout title={`${title} | Monitor Electoral`}>
  <main
    class="min-h-screen bg-[#0d1611] flex items-center justify-center p-4 md:p-8 font-sans antialiased"
  >
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
      <div
        class="absolute -top-[10%] -left-[10%] w-[40%] h-[40%] bg-primary-green rounded-full blur-[120px] opacity-50"
      >
      </div>
      <div
        class="absolute bottom-[10%] right-[10%] w-[30%] h-[30%] bg-hunter/5 rounded-full blur-[100px]"
      >
      </div>
    </div>

    <div
      class="relative w-full max-w-6xl min-h-[85vh] grid grid-cols-1 lg:grid-cols-12 bg-[#1a2c21]/40 backdrop-blur-2xl rounded-[2.5rem] border border-white/10 shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-500"
    >
      <div
        class="lg:col-span-7 relative p-8 md:p-12 lg:p-16 flex flex-col justify-between overflow-hidden border-b lg:border-b-0 lg:border-r border-white/5"
      >
        <!-- Header -->
        <div class="flex items-center gap-4 z-10">
          <div
            class="w-12 h-12 bg-hunter rounded-2xl flex items-center justify-center text-primary-green -rotate-3 shadow-lg"
          >
            <Globe size={28} strokeWidth={2.5} />
          </div>
          <div>
            <h2
              class="text-hunter font-black text-2xl tracking-tighter leading-none"
            >
              MONITOR
            </h2>
            <p
              class="text-hunter/40 text-[10px] uppercase tracking-[0.3em] font-bold"
            >
              Elecciones Subnacionales
            </p>
          </div>
        </div>

        <div class="relative z-10 my-12">
          <span
            class="text-hunter/30 uppercase tracking-[0.5em] text-xs font-bold mb-4 block"
            >{eyebrow}</span
          >
          <slot name="left-content" />
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 z-10 transition-all">
          <slot name="left-features" />
        </div>

        <div
          class="absolute -right-20 top-1/2 -translate-y-1/2 opacity-10 pointer-events-none z-0"
        >
          <slot name="background-icon" />
        </div>
        <div class="mt-2">
          <Sponsors />
        </div>
      </div>

      <div
        class="lg:col-span-5 bg-hunter p-8 md:p-12 lg:p-16 flex flex-col relative transition-colors duration-500"
      >
        <div class="flex justify-between items-center mb-8 lg:mb-12 z-10">
          <div class="flex gap-1.5">
            {
              dots.map((dot) => (
                <div
                  class:list={[
                    "h-1.5 rounded-full transition-all duration-300",
                    step === dot
                      ? "w-8 bg-primary-green"
                      : "w-2 bg-primary-green/10",
                  ]}
                />
              ))
            }
          </div>
          <span
            class="text-[10px] font-black text-primary-green bg-primary-green/20 px-3 py-1 rounded-full uppercase tracking-widest"
            >Paso {step} de {totalSteps}</span
          >
        </div>

        <div class="flex-grow flex flex-col justify-center space-y-8 py-6 z-10">
          <div class="space-y-4">
            <slot name="right-content" />
          </div>

          <div class="space-y-4">
            <slot name="actions" />
          </div>

          <p
            class="text-center text-[11px] text-primary-green/40 font-bold uppercase tracking-tighter"
          >
            Contribuyendo a una democracia más informada y transparente
          </p>
        </div>

        <div class="mt-4 text-center z-10">
          <span
            class="text-[9px] font-black text-primary-green/20 uppercase tracking-[0.6em]"
            >Plataforma Cívica 2026</span
          >
        </div>
      </div>
    </div>
  </main>
</Layout>

<style>
  :global(body) {
    background-color: #0d1611;
    margin: 0;
  }

  :global(h1),
  :global(h2),
  :global(h3) {
    text-wrap: balance;
  }
</style>
