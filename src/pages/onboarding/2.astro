---
import OnboardingStep from "../../components/onboarding/OnboardingStep.astro";
import MunicipalityPicker from "../../components/onboarding/MunicipalityPicker";
import { MapPin, Globe } from "lucide-react";
---

<OnboardingStep step={2} totalSteps={4} title="Tu Lugar" eyebrow="Tu Lugar">
    <div slot="left-content">
        <h1
            class="text-5xl sm:text-7xl md:text-8xl font-black text-hunter leading-[0.85] tracking-tighter mb-6"
        >
            Tu <br />
            <span
                class="text-transparent bg-clip-text bg-linear-to-r from-hunter to-hunter/20"
            >
                Municipio.
            </span>
        </h1>
        <p
            class="text-hunter/60 text-lg md:text-xl max-w-md font-medium leading-relaxed"
        >
            Bolivia tiene cientos de municipios. Encuentra a los candidatos de
            tu zona para votar informado.
        </p>
    </div>

    <div slot="left-features">
        <div class="flex items-center gap-3 text-hunter/80">
            <div class="p-2 bg-white/5 rounded-lg border border-white/5">
                <MapPin size={20} />
            </div>
            <span class="text-sm font-semibold">Geolocalización</span>
        </div>
        <div class="flex items-center gap-3 text-hunter/80">
            <div class="p-2 bg-white/5 rounded-lg border border-white/5">
                <Globe size={20} />
            </div>
            <span class="text-sm font-semibold">Filtro Automático</span>
        </div>
    </div>

    <div slot="background-icon" class="animate-float">
        <MapPin
            size={460}
            strokeWidth={0.5}
            color="currentColor"
            className="text-hunter opacity-5"
        />
    </div>

    <div slot="right-content">
        <div class="relative">
            <h3
                class="text-3xl sm:text-4xl font-extrabold text-primary-green tracking-tight leading-tight"
            >
                ¿Dónde votas?
            </h3>
            <p class="text-primary-green/70 font-medium mt-4">
                Si compartes tu ubicación, te mostraremos automáticamente a los
                candidatos de tu circunscripción.
            </p>
        </div>
    </div>

    <div slot="actions">
        <MunicipalityPicker client:load />
    </div>
</OnboardingStep>

<script>
    if ("serviceWorker" in navigator) {
        const base =
            (import.meta.env.PUBLIC_BASE_URL ?? "/") +
            (import.meta.env.PUBLIC_BASE_ROUTE ?? "/");
        const swUrl = `${base.replace(/\/$/, "")}/sw.js`;
        navigator.serviceWorker.register(swUrl).catch(() => {});
    }
</script>
